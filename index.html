<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Prensesime... ü§ç</title>
    <style>
        /* --- 1. RESET & TEMEL AYARLAR --- */
        :root {
            --bg-deep: #05020a;
            --purple-glow: rgba(140, 20, 252, 0.6);
            --pink-glow: rgba(255, 0, 128, 0.6);
            --glass: rgba(255, 255, 255, 0.08);
            --border: rgba(255, 255, 255, 0.15);
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-deep);
            background-image: 
                radial-gradient(circle at 20% 30%, #2a0a38 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, #1a0524 0%, transparent 40%);
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            overflow: hidden;
            touch-action: none;
            -webkit-font-smoothing: antialiased; /* iPhone yazƒ± netliƒüi */
        }

        /* Arka Plan Par√ßacƒ±k Efekti */
        .particles {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        .particle {
            position: absolute;
            width: 2px; height: 2px;
            background: white;
            border-radius: 50%;
            opacity: 0.3;
            animation: float 10s infinite linear;
        }

        /* --- 2. Gƒ∞Rƒ∞≈û YAZISI --- */
        #greeting {
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: -0.5px;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            background: linear-gradient(135deg, #fff 30%, #ff80bf 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 40px;
            transition: all 1s cubic-bezier(0.2, 0.8, 0.2, 1);
            z-index: 10;
            text-shadow: 0 0 30px var(--purple-glow);
        }

        /* --- 3. PREMIUM ZARF (D√ºzeltildi) --- */
        .envelope-container {
            position: relative;
            width: 320px;
            height: 220px;
            perspective: 1500px;
            z-index: 10;
            opacity: 0;
            transform: translateY(50px);
            transition: all 1s ease;
        }

        .envelope {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            cursor: pointer;
        }

        .flap {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(160deg, #4a1066, #2d053d);
            border-radius: 8px;
            clip-path: polygon(0 0, 100% 0, 50% 55%);
            transform-origin: top;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 5;
            box-shadow: inset 0 2px 5px rgba(255,255,255,0.1);
            border-top: 1px solid rgba(255,255,255,0.2);
        }

        .pocket {
            position: absolute;
            bottom: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(180deg, #5c167e, #3a0852);
            clip-path: polygon(0 100%, 50% 0, 100% 100%);
            border-radius: 0 0 8px 8px;
            z-index: 4;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.3);
        }
        
        .pocket-bg { 
            position: absolute;
            bottom: 0; left: 0; width: 100%; height: 98%;
            background: #1a0524;
            border-radius: 8px;
            z-index: 1;
        }

        .wax-seal {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -20%);
            width: 50px; height: 50px;
            background: radial-gradient(circle at 30% 30%, #ffd700, #b8860b);
            border-radius: 50%;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5), inset 0 2px 5px rgba(255,255,255,0.4);
            z-index: 6;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: opacity 0.5s;
        }
        .wax-seal::after { content: 'ü§ç'; opacity: 0.9; }

        /* Zarf A√ßƒ±lma Animasyonu */
        .envelope-container.open .flap { transform: rotateX(180deg); z-index: 0; }
        .envelope-container.open .wax-seal { opacity: 0; }
        .envelope-container.fly-away { 
            animation: envelopeFlyAway 1.2s forwards ease-in-out;
        }

        @keyframes envelopeFlyAway {
            0% { transform: scale(1) translateY(0); opacity: 1; }
            100% { transform: scale(0.5) translateY(400px); opacity: 0; }
        }

        /* --- 4. ETKƒ∞LE≈ûƒ∞M ALANI --- */
        .interaction-area {
            position: absolute;
            bottom: 12%;
            width: 100%;
            text-align: center;
            z-index: 20;
            opacity: 0;
            transition: opacity 1s;
        }

        .prompt-box {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px); /* iPhone Blur */
            border: 1px solid var(--border);
            padding: 25px;
            border-radius: 24px;
            display: inline-block;
            box-shadow: 0 10px 40px rgba(0,0,0,0.4);
            max-width: 85%;
        }

        .prompt-text {
            margin: 0 0 20px 0;
            font-size: 1.2rem;
            color: #eee;
            line-height: 1.5;
        }

        .btn-group { display: flex; gap: 15px; justify-content: center; }

        .btn {
            padding: 14px 28px;
            border-radius: 14px;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .btn-yes {
            background: linear-gradient(135deg, #d900ff, #7300ff);
            color: white;
            box-shadow: 0 0 20px rgba(217, 0, 255, 0.4);
        }
        .btn-no {
            background: rgba(255,255,255,0.05);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .btn:active { transform: scale(0.95); }
        .shake { animation: shake 0.5s; }
        @keyframes shake { 0%, 100% {transform: translateX(0);} 25% {transform: translateX(-5px);} 75% {transform: translateX(5px);} }

        /* --- 5. 3D CAROUSEL (iPhone Optimizasyonu) --- */
        .carousel-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            perspective: 1100px;
            -webkit-perspective: 1100px; /* Safari Fix */
            opacity: 0;
            pointer-events: none;
            transition: opacity 1.5s ease;
            z-index: 5;
        }

        .carousel {
            position: relative;
            width: 280px;
            height: 400px;
            transform-style: preserve-3d;
            -webkit-transform-style: preserve-3d; /* Safari Fix */
            /* D√∂n√º≈ü JS ile yapƒ±lacak */
        }

        .card {
            position: absolute;
            left: 0; top: 0;
            width: 100%; height: 100%;
            border-radius: 18px;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 25px rgba(140, 20, 252, 0.4);
            background: #000;
            -webkit-backface-visibility: hidden; /* Titremeyi √∂nler */
            backface-visibility: hidden;
            /* Yansƒ±ma */
            -webkit-box-reflect: below 10px linear-gradient(transparent, transparent, rgba(0,0,0,0.3));
        }

        .card img, .card video {
            width: 100%; 
            height: 100%; 
            object-fit: contain; /* Sƒ±ƒüdƒ±rma ayarƒ± */
            display: block;
            background-color: #000;
        }

        /* Animasyon Helperlarƒ± */
        .fade-in-up { opacity: 1 !important; transform: translateY(0) !important; }
        .fade-out { opacity: 0 !important; pointer-events: none !important; }
        .hidden { display: none !important; }

        @keyframes float {
            0% { transform: translateY(0px); opacity: 0; }
            50% { opacity: 0.5; }
            100% { transform: translateY(-100vh); opacity: 0; }
        }
    </style>
</head>
<body>

    <div class="particles" id="particles"></div>

    <div id="greeting">ƒ∞yi ki doƒüdun Prensesim... ü§ç</div>

    <div class="envelope-container" id="envelopeContainer">
        <div class="envelope">
            <div class="flap"></div>
            <div class="pocket"></div>
            <div class="pocket-bg"></div>
            <div class="wax-seal"></div>
        </div>
    </div>

    <div class="interaction-area" id="interaction">
        <div class="prompt-box">
            <p class="prompt-text" id="promptText">Fotoƒüraflar biraz sƒ±kƒ±≈ümƒ±≈ü galiba... ü§≠<br>A√ßmak ister misin?</p>
            <div class="btn-group">
                <button class="btn btn-no" id="btnNo">Hayƒ±r</button>
                <button class="btn btn-yes" id="btnYes">Evet</button>
            </div>
        </div>
    </div>

    <div class="carousel-container" id="carouselContainer">
        <div class="carousel" id="carousel"></div>
    </div>

    <script>
        // --- 1. FOTOƒûRAF Lƒ∞NKLERƒ∞ (BURAYI D√úZENLE) ---
        // ƒ∞stediƒüin kadar ekle, kod otomatik hesaplar.
        // --- 1. FOTOƒûRAF Lƒ∞NKLERƒ∞ (YEREL DOSYALAR) ---
        const photos = [
             'yeni yƒ±lƒ±mm....mp4',
             'sansƒ±mm.jpg',
             'basrolum.jpg',
             'manzaramm.jpg',
             'zaafƒ±mm.jpg'
        ];

        // --- DOM ELEMENTLERƒ∞ ---
        const greeting = document.getElementById('greeting');
        const envelope = document.getElementById('envelopeContainer');
        const interaction = document.getElementById('interaction');
        const carouselContainer = document.getElementById('carouselContainer');
        const carousel = document.getElementById('carousel');
        const btnNo = document.getElementById('btnNo');
        const btnYes = document.getElementById('btnYes');
        const promptText = document.getElementById('promptText');
        const promptBox = document.querySelector('.prompt-box');

        // --- Gƒ∞Rƒ∞≈û ANƒ∞MASYONLARI ---
        window.onload = () => {
            createParticles();
            setTimeout(() => greeting.classList.add('fade-in-up'), 500);
            setTimeout(() => envelope.classList.add('fade-in-up'), 1200);
            setTimeout(() => interaction.classList.add('fade-in-up'), 2500);
            initCarousel();
        };

        // --- HAYIR BUTONU SENARYOSU ---
        let noCount = 0;
        btnNo.addEventListener('click', () => {
            noCount++;
            promptBox.classList.remove('shake');
            void promptBox.offsetWidth; // Reflow
            promptBox.classList.add('shake');

            if (noCount === 1) {
                promptText.innerHTML = "Emin misin? √áok g√ºzel ≈üeyler var i√ßinde... üëÄ";
                btnNo.innerText = "Yoo";
            } else if (noCount === 2) {
                promptText.innerHTML = "Hƒ±r√ßƒ±n prenses damarƒ±n tuttu yine... Yapma be. üòÖ";
                btnNo.innerText = "ƒ∞stemem";
            } else if (noCount === 3) {
                promptText.innerHTML = "Tamam ≈üaka yaptƒ±m, bas hadi Evet'e. Bekletme bizi. ‚ù§Ô∏è";
                btnNo.style.display = 'none';
            }
        });

        // --- EVET BUTONU: B√úY√úK Fƒ∞NAL ---
        btnYes.addEventListener('click', () => {
            // 1. Ekranƒ± temizle
            interaction.classList.add('fade-out');
            greeting.classList.add('fade-out');

            // 2. Zarfƒ± a√ß
            envelope.classList.add('open');
            
            // 3. Zarfƒ± u√ßur (Fly Away)
            setTimeout(() => {
                envelope.classList.add('fly-away');
            }, 600);

            // 4. Zarfƒ± tamamen yok et ve Carousel'i getir
            setTimeout(() => {
                envelope.classList.add('hidden'); // DOM'dan gizle (display:none)
                carouselContainer.style.opacity = '1';
                carouselContainer.style.pointerEvents = 'auto';
                
                // OTOMATƒ∞K D√ñNMEYƒ∞ BA≈ûLAT!
                requestAnimationFrame(animateCarousel);
            }, 1500);
        });

        // --- 3D CAROUSEL & AUTO ROTATE ---
        let theta = 0;
        let radius = 0;
        let currentRotation = 0;
        let autoRotateSpeed = 0.2; // D√∂nme Hƒ±zƒ± (0.1 daha yava≈ü, 0.5 daha hƒ±zlƒ±)
        let isDragging = false;
        let startX = 0;

        function initCarousel() {
            const count = photos.length;
            theta = 360 / count;
            radius = Math.round( (280 / 2) / Math.tan( Math.PI / count ) ) + 40; 

            photos.forEach((src, i) => {
                const card = document.createElement('div');
                card.className = 'card';
                const angle = theta * i;
                card.style.transform = `rotateY(${angle}deg) translate3d(0, 0, ${radius}px)`;
                
                // --- ƒ∞≈ûTE Sƒ∞Hƒ∞RLƒ∞ KISIM BURASI ---
                if (src.endsWith('.mp4')) {
                    // Eƒüer dosya video ise:
                    const video = document.createElement('video');
                    video.src = src;
                    video.autoplay = true; // Otomatik ba≈üla
                    video.loop = true;     // S√ºrekli d√∂n
                    video.muted = true;    // Ses kapalƒ± (Mecburi, yoksa iPhone oynatmaz)
                    video.playsInline = true; // iPhone'da tam ekran olmadan olduƒüu yerde oyna
                    card.appendChild(video);
                } else {
                    // Eƒüer dosya resim ise:
                    const img = document.createElement('img');
                    img.src = src;
                    card.appendChild(img);
                }
                // ---------------------------------

                carousel.appendChild(card);
            });
        }

        // --- S√úREKLƒ∞ D√ñNME D√ñNG√úS√ú ---
        function animateCarousel() {
            if (!isDragging) {
                currentRotation -= autoRotateSpeed; // Sola doƒüru yava≈ü√ßa d√∂n
                carousel.style.transform = `rotateY(${currentRotation}deg)`;
            }
            requestAnimationFrame(animateCarousel);
        }

        // --- DOKUNMATƒ∞K KONTROL ---
        document.addEventListener('touchstart', (e) => {
            if (carouselContainer.style.opacity !== '1') return;
            isDragging = true;
            startX = e.touches[0].clientX;
        }, {passive: false});

        document.addEventListener('touchmove', (e) => {
            if (!isDragging) return;
            e.preventDefault();
            const currentX = e.touches[0].clientX;
            const diff = (startX - currentX) * 0.3; // Kaydƒ±rma hƒ±zƒ±
            currentRotation -= diff;
            carousel.style.transform = `rotateY(${currentRotation}deg)`;
            startX = currentX;
        }, {passive: false});

        document.addEventListener('touchend', () => {
            isDragging = false;
            // Bƒ±rakƒ±nca otomatik d√∂nmeye kaldƒ±ƒüƒ± yerden devam eder
        });

        // --- PAR√áACIK EFEKTƒ∞ ---
        function createParticles() {
            const container = document.getElementById('particles');
            for(let i=0; i<30; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.left = Math.random() * 100 + '%';
                p.style.top = Math.random() * 100 + '%';
                p.style.animationDelay = Math.random() * 5 + 's';
                p.style.opacity = Math.random();
                container.appendChild(p);
            }
        }
    </script>
</body>
</html>